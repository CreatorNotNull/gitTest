<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="cn.yueqian.com.dao.IUserDao"><!-- 用于绑定dao接口 -->
	<!-- 开启二级缓存 -->
	<cache eviction="FIFO" flushInterval="60000" size="512" readOnly="true"></cache>
	<!-- 属性与字段不同手动配置映射 -->
  <resultMap type="cn.yueqian.com.dao.entity.User" id="userResultMap">
  	<id property="id" column="id"/>
  	<result property="score" column="score"/>
  	<result property="userName" column="name"/>
  	<result property="pass" column="pass"/>
  	<result property="sex" column="sex"/>
  	<result property="address" column="address"/>
  	<result property="birthday" column="birthday"/>
  	<result property="money" column="money"/>
  </resultMap>
  <select id="getUserById" parameterType="int" resultMap="userResultMap"><!-- 使用手动配置后 返回属性不能为resultType，要用resultMap -->
  		select id,score,name,pass,sex,address,birthday,money from `user` where id=#{id}
  </select>
  <select id="listAll" resultMap="userResultMap">
  		select id,score,name,pass,sex,address,birthday,money from `user`
  </select>
  <select id="getUserByNameAndPass" parameterType="cn.yueqian.com.dao.entity.User" resultMap="userResultMap">
  		select * from `user` where name=#{name} and pass=#{pass}
  		<!-- select id,score,name as userName,pass,sex,address,birthday,money from `user` where name=#{name} and pass=#{pass} -->
  </select>
  <insert id="save" parameterType="cn.yueqian.com.dao.entity.User"><!-- id必须和接口名字相同， -->
  		INSERT INTO `user` (id,score,name,pass,sex,address,birthday,money) VALUE (#{id},#{score},#{userName},#{pass},#{sex},#{address},#{birthday},#{money})
  </insert>
  <update id="update" parameterType="cn.yueqian.com.dao.entity.User">
  		UPDATE `USER` SET pass=#{pass} WHERE `name` = #{userName}
  </update>
  <delete id="del" parameterType="cn.yueqian.com.dao.entity.User">
  		delete from user where name = #{userName}
  </delete>
  <select id="getTotalCount" parameterType="cn.yueqian.com.dao.entity.User" resultType="int">
  		SELECT COUNT(*) FROM `USER`
  </select>
  <select id="getOnePageInfo" parameterType="cn.yueqian.com.dao.entity.User" resultMap="userResultMap">
  		SELECT id,score,name,pass,sex,address,birthday,money FROM USER LIMIT #{currentPage},#{pageSize}
  </select>
 </mapper>
